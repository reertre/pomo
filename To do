#!/usr/bin/env bash
set -e

# =====================
# Configuration
# =====================
OLD_CHG="CHG99999999999"
NEW_CHG="CHG181272245"

OLD_VERSION="99.9"
NEW_VERSION="v15.0"

echo "Renaming occurrences of:"
echo "  '$OLD_CHG' → '$NEW_CHG'"
echo "  '$OLD_VERSION' → '$NEW_VERSION'"
echo

# -depth ensures we rename children before parent directories.
find . -depth | while IFS= read -r oldpath; do
  # Build the new path by replacing both old patterns with the new ones
  newpath="$oldpath"

  # Replace CHG99999999999 → CHG181272245
  newpath="${newpath//$OLD_CHG/$NEW_CHG}"

  # Replace 99.9 → v15.0
  newpath="${newpath//$OLD_VERSION/$NEW_VERSION}"

  # Only rename if something changed
  if [ "$oldpath" != "$newpath" ]; then
    echo "Renaming: '$oldpath' -> '$newpath'"
    mv "$oldpath" "$newpath"
  fi
done

echo
echo "All renames complete!"